{"ast":null,"code":"import { initializeApp } from \"firebase/app\";\nimport { GoogleAuthProvider, getAuth, signInWithPopup, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail, signOut, updateProfile } from \"firebase/auth\";\nimport { getFirestore, query, getDocs, collection, where, addDoc } from \"firebase/firestore\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC_Gh13Kj7XpYUJ77u-P6Rm_mluMSldj2s\",\n  authDomain: \"cis-454-group-2.firebaseapp.com\",\n  databaseURL: \"https://cis-454-group-2-default-rtdb.firebaseio.com\",\n  projectId: \"cis-454-group-2\",\n  storageBucket: \"cis-454-group-2.appspot.com\",\n  messagingSenderId: \"316148964938\",\n  appId: \"1:316148964938:web:d87993a8475d6aa9cd90b3\",\n  measurementId: \"G-6LV9TBP0N2\"\n};\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst googleProvider = new GoogleAuthProvider();\n\nconst signInWithGoogle = async () => {\n  try {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n    const docs = await getDocs(q);\n\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, \"users\"), {\n        uid: user.uid,\n        name: user.displayName,\n        authProvider: \"google\",\n        email: user.email\n      });\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst logInWithEmailAndPassword = async (email, password) => {\n  try {\n    await signInWithEmailAndPassword(auth, email, password);\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst registerWithEmailAndPassword = async (name, email, password) => {\n  try {\n    const res = await createUserWithEmailAndPassword(auth, email, password);\n    const user = res.user;\n    await addDoc(collection(db, \"users\"), {\n      uid: user.uid,\n      name: user.displayName,\n      authProvider: \"local\",\n      email\n    });\n\n    try {\n      updateProfile(auth.currentUser, {\n        displayName: name\n      });\n    } catch (err) {\n      console.error(err);\n      alert(err.message);\n    }\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst sendPasswordReset = async email => {\n  try {\n    await sendPasswordResetEmail(auth, email);\n    alert(\"Password reset link sent!\");\n  } catch (err) {\n    console.error(err);\n    alert(err.message);\n  }\n};\n\nconst logout = () => {\n  signOut(auth);\n};\n\nexport { auth, db, signInWithGoogle, logInWithEmailAndPassword, signInWithEmailAndPassword, registerWithEmailAndPassword, sendPasswordReset, sendPasswordResetEmail, logout };","map":{"version":3,"sources":["/Users/gavinkline/git-dev/cis454-group2/src/firebase.js"],"names":["initializeApp","GoogleAuthProvider","getAuth","signInWithPopup","signInWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordResetEmail","signOut","updateProfile","getFirestore","query","getDocs","collection","where","addDoc","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","googleProvider","signInWithGoogle","res","user","q","uid","docs","length","name","displayName","authProvider","email","err","console","error","alert","message","logInWithEmailAndPassword","password","registerWithEmailAndPassword","currentUser","sendPasswordReset","logout"],"mappings":"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","sourcesContent":["import { initializeApp } from \"firebase/app\";\n\nimport {\n    GoogleAuthProvider,\n    getAuth,\n    signInWithPopup,\n    signInWithEmailAndPassword,\n    createUserWithEmailAndPassword,\n    sendPasswordResetEmail,\n    signOut,\n    updateProfile\n} from \"firebase/auth\";\n\nimport {\n    getFirestore,\n    query,\n    getDocs,\n    collection,\n    where,\n    addDoc,\n} from \"firebase/firestore\";\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyC_Gh13Kj7XpYUJ77u-P6Rm_mluMSldj2s\",\n    authDomain: \"cis-454-group-2.firebaseapp.com\",\n    databaseURL: \"https://cis-454-group-2-default-rtdb.firebaseio.com\",\n    projectId: \"cis-454-group-2\",\n    storageBucket: \"cis-454-group-2.appspot.com\",\n    messagingSenderId: \"316148964938\",\n    appId: \"1:316148964938:web:d87993a8475d6aa9cd90b3\",\n    measurementId: \"G-6LV9TBP0N2\"\n};\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst googleProvider = new GoogleAuthProvider();\nconst signInWithGoogle = async () => {\ntry {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n    await addDoc(collection(db, \"users\"), {\n        uid: user.uid,\n        name: user.displayName,\n        authProvider: \"google\",\n        email: user.email,\n    });\n    }\n} catch (err) {\n    console.error(err);\n    alert(err.message);\n}\n};\n\nconst logInWithEmailAndPassword = async (email, password) => {\ntry {\n    await signInWithEmailAndPassword(auth, email, password);\n} catch (err) {\n    console.error(err);\n    alert(err.message);\n}\n};\nconst registerWithEmailAndPassword = async (name, email, password) => {\ntry {\n    const res = await createUserWithEmailAndPassword(auth, email, password);\n    const user = res.user;\n    await addDoc(collection(db, \"users\"), {\n    uid: user.uid,\n    name: user.displayName,\n    authProvider: \"local\",\n    email,\n    });\n    try {\n        updateProfile(auth.currentUser, { displayName: name} )\n    } catch (err) {\n        console.error(err);\n        alert(err.message);\n    }\n} catch (err) {\n    console.error(err);\n    alert(err.message);\n}\n};\nconst sendPasswordReset = async (email) => {\ntry {\n    await sendPasswordResetEmail(auth, email);\n    alert(\"Password reset link sent!\");\n} catch (err) {\n    console.error(err);\n    alert(err.message);\n}\n};\nconst logout = () => {\nsignOut(auth);\n};\nexport {\nauth,\ndb,\nsignInWithGoogle,\nlogInWithEmailAndPassword,\nsignInWithEmailAndPassword,\nregisterWithEmailAndPassword,\nsendPasswordReset,\nsendPasswordResetEmail,\nlogout,\n  };\n\n"]},"metadata":{},"sourceType":"module"}