{"ast":null,"code":"import _asyncToGenerator from\"/Users/gavinkline/git-dev/cis454-group2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/gavinkline/git-dev/cis454-group2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/gavinkline/git-dev/cis454-group2/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from\"react\";import{useAuthState}from\"react-firebase-hooks/auth\";import{useNavigate}from\"react-router-dom\";import\"../App.css\";import{auth,db,logout}from\"../firebase\";import{query,collection,getDocs,where}from\"firebase/firestore\";import ProjectList from\"../components/Projects/ProjectList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Account(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),loadedProjects=_useState2[0],setLoadedProjects=_useState2[1];var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,2),user=_useAuthState2[0],loading=_useAuthState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var navigate=useNavigate();var fetchUserName=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var q,doc,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;q=query(collection(db,\"users\"),where(\"uid\",\"==\",user===null||user===void 0?void 0:user.uid));_context.next=4;return getDocs(q);case 4:doc=_context.sent;data=doc.docs[0].data();setName(data.name);_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(_context.t0);alert(\"An error occured while fetching user data\");case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchUserName(){return _ref.apply(this,arguments);};}();useEffect(function(){if(loading)return;if(!user)return navigate(\"/register\");fetchUserName();},[user,loading]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"This is the Account page\"}),/*#__PURE__*/_jsx(\"h2\",{children:\" Name: Your name\"}),/*#__PURE__*/_jsx(\"h3\",{children:\" Email: Your email\"}),/*#__PURE__*/_jsx(ProjectList,{projects:loadedProjects})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard__container\",children:[\"Logged in as\",/*#__PURE__*/_jsx(\"div\",{children:name}),/*#__PURE__*/_jsx(\"div\",{children:user===null||user===void 0?void 0:user.email}),/*#__PURE__*/_jsx(\"button\",{className:\"dashboard__btn\",onClick:logout,children:\"Logout\"})]})]});};export default Account;","map":{"version":3,"sources":["/Users/gavinkline/git-dev/cis454-group2/src/pages/accounts.js"],"names":["React","useEffect","useState","useAuthState","useNavigate","auth","db","logout","query","collection","getDocs","where","ProjectList","Account","loadedProjects","setLoadedProjects","user","loading","name","setName","navigate","fetchUserName","q","uid","doc","data","docs","console","error","alert","email"],"mappings":"0XAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,YAAT,KAA6B,2BAA7B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAO,YAAP,CACA,OAASC,IAAT,CAAeC,EAAf,CAAmBC,MAAnB,KAAiC,aAAjC,CACA,OAASC,KAAT,CAAgBC,UAAhB,CAA4BC,OAA5B,CAAqCC,KAArC,KAAkD,oBAAlD,CACA,MAAOC,CAAAA,WAAP,KAAwB,oCAAxB,C,wFAGA,QAASC,CAAAA,OAAT,EAAmB,CACnB,cAA4CX,QAAQ,CAAC,EAAD,CAApD,wCAAOY,cAAP,eAAuBC,iBAAvB,eACE,kBAAwBZ,YAAY,CAACE,IAAD,CAApC,gDAAOW,IAAP,mBAAaC,OAAb,mBACA,eAAwBf,QAAQ,CAAC,EAAD,CAAhC,yCAAOgB,IAAP,eAAaC,OAAb,eACA,GAAMC,CAAAA,QAAQ,CAAGhB,WAAW,EAA5B,CACA,GAAMiB,CAAAA,aAAa,0FAAG,kKAEZC,CAFY,CAERd,KAAK,CAACC,UAAU,CAACH,EAAD,CAAK,OAAL,CAAX,CAA0BK,KAAK,CAAC,KAAD,CAAQ,IAAR,CAAcK,IAAd,SAAcA,IAAd,iBAAcA,IAAI,CAAEO,GAApB,CAA/B,CAFG,uBAGAb,CAAAA,OAAO,CAACY,CAAD,CAHP,QAGZE,GAHY,eAIZC,IAJY,CAILD,GAAG,CAACE,IAAJ,CAAS,CAAT,EAAYD,IAAZ,EAJK,CAKlBN,OAAO,CAACM,IAAI,CAACP,IAAN,CAAP,CALkB,+EAOlBS,OAAO,CAACC,KAAR,cACAC,KAAK,CAAC,2CAAD,CAAL,CARkB,oEAAH,kBAAbR,CAAAA,aAAa,0CAAnB,CAWApB,SAAS,CAAC,UAAM,CACd,GAAIgB,OAAJ,CAAa,OACb,GAAI,CAACD,IAAL,CAAW,MAAOI,CAAAA,QAAQ,CAAC,WAAD,CAAf,CACXC,aAAa,GACd,CAJQ,CAIN,CAACL,IAAD,CAAOC,OAAP,CAJM,CAAT,CAKA,mBACE,aAAK,SAAS,CAAC,WAAf,wBACE,oCACA,gDADA,cAEA,wCAFA,cAGA,0CAHA,cAIA,KAAC,WAAD,EAAa,QAAQ,CAAEH,cAAvB,EAJA,GADF,cAOG,aAAK,SAAS,CAAC,sBAAf,uCAEE,qBAAMI,IAAN,EAFF,cAGE,qBAAMF,IAAN,SAAMA,IAAN,iBAAMA,IAAI,CAAEc,KAAZ,EAHF,cAIE,eAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAEvB,MAA5C,oBAJF,GAPH,GADF,CAkBD,EACD,cAAeM,CAAAA,OAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"../App.css\";\nimport { auth, db, logout } from \"../firebase\";\nimport { query, collection, getDocs, where } from \"firebase/firestore\";\nimport ProjectList from \"../components/Projects/ProjectList\";\n\n\nfunction Account() {\nconst [loadedProjects, setLoadedProjects] = useState([]);\n  const [user, loading] = useAuthState(auth);\n  const [name, setName] = useState(\"\");\n  const navigate = useNavigate();\n  const fetchUserName = async () => {\n    try {\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n      const doc = await getDocs(q);\n      const data = doc.docs[0].data();\n      setName(data.name);\n    } catch (err) {\n      console.error(err);\n      alert(\"An error occured while fetching user data\");\n    }\n  };\n  useEffect(() => {\n    if (loading) return;\n    if (!user) return navigate(\"/register\");\n    fetchUserName();\n  }, [user, loading]);\n  return (\n    <div className=\"dashboard\">\n      <div>\n      <h1>This is the Account page</h1>\n      <h2> Name: Your name</h2>\n      <h3> Email: Your email</h3>\n      <ProjectList projects={loadedProjects} />\n    </div>\n       <div className=\"dashboard__container\">\n        Logged in as\n         <div>{name}</div>\n         <div>{user?.email}</div>\n         <button className=\"dashboard__btn\" onClick={logout}>\n          Logout\n         </button>\n       </div>\n     </div>\n  );\n};\nexport default Account;"]},"metadata":{},"sourceType":"module"}